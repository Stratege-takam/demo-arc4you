@inherits LayoutComponentBase
@inject NVAppStateService AppState;

<NVLayout HasSidebarOpened="AppState.IsSidebarVisible()">
    <NVLayoutHeader>
        <NVStack PX="8" Height="64px" Color="primary">
            <NVButton ML="-5" MR="3" Level="1" Color="primary" Display="block" MD="@(new {Display = "hidden"})" Icon="menu" OnClick="@(() => AppState.ToggleDisplaySidebar())" />
            <NVBlock BackgroundColor="white"><NVImg Src="/assets/img/icon-512.png" Height="32" Width="32" /></NVBlock>
        </NVStack>
    </NVLayoutHeader>

    <NVLayoutSidebar>
        <NVSidebar Stack StackVertical Color="white" HFull>
            <NVButton Shrink="0" Grow="0" Level="2" Display="block" ML="auto" MD="@(new {Display = "hidden"})" Icon="x" OnClick="@(() => AppState.DisplaySidebar(false))" />
            <NVNav Vertical Level="1" Overflow="auto">
                <NavMenu />
            </NVNav>
            <NVNav Vertical Color="primary" Level="1" Overflow="auto" MT="auto">
                <BottomNavMenu />
            </NVNav>
        </NVSidebar>
    </NVLayoutSidebar>

    <NVLayoutContent>
        <NVBlock P="8">
            @Body
        </NVBlock>
    </NVLayoutContent>
</NVLayout>

<NVOverlays />

@code {
    protected override void OnInitialized()
    {
        base.OnInitialized();
        AppState.DisplaySidebar(false);
    }
}
